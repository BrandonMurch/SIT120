{"remainingRequest":"/home/brandon/Documents/Independent Programming/tend/node_modules/thread-loader/dist/cjs.js!/home/brandon/Documents/Independent Programming/tend/node_modules/babel-loader/lib/index.js!/home/brandon/Documents/Independent Programming/tend/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/brandon/Documents/Independent Programming/tend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/brandon/Documents/Independent Programming/tend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/brandon/Documents/Independent Programming/tend/src/components/ImageGallery.vue?vue&type=template&id=85c598cc&scoped=true","dependencies":[{"path":"/home/brandon/Documents/Independent Programming/tend/src/components/ImageGallery.vue","mtime":1629905831589},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/cache-loader/dist/cjs.js","mtime":1628388539905},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/thread-loader/dist/cjs.js","mtime":1628388541133},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/babel-loader/lib/index.js","mtime":1628388539905},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1628388539545},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/cache-loader/dist/cjs.js","mtime":1628388539905},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/vue-loader-v16/dist/index.js","mtime":1628388539541}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCByZW5kZXJTbG90IGFzIF9yZW5kZXJTbG90LCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgbWVyZ2VQcm9wcyBhcyBfbWVyZ2VQcm9wcywgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB2U2hvdyBhcyBfdlNob3csIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtODVjNTk4Y2MiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTg1YzU5OGNjIik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICByZWY6ICJjb250YWluZXIiLAogIGNsYXNzOiAiZ2FsbGVyeS1jb250YWluZXIiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAicmVsb2FkLXRyaWdnZXIiLAogIHJlZjogInJlbG9hZCIKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9JbWFnZUNhcmQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiSW1hZ2VDYXJkIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzEsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJGRhdGEuaW1hZ2VDb2x1bW5zLCBmdW5jdGlvbiAoY29sdW1uLCBpbmRleCkgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCB7CiAgICAgIGNsYXNzOiAiZ2FsbGVyeS1jb2x1bW4iLAogICAgICBrZXk6IGluZGV4CiAgICB9LCBbaW5kZXggPT0gMCA/IF9yZW5kZXJTbG90KF9jdHguJHNsb3RzLCAiZGVmYXVsdCIsIHsKICAgICAga2V5OiAwCiAgICB9LCB1bmRlZmluZWQsIHRydWUpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSksIChfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChjb2x1bW4sIGZ1bmN0aW9uIChpbWFnZSkgewogICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9JbWFnZUNhcmQsIF9tZXJnZVByb3BzKHsKICAgICAgICBrZXk6IGltYWdlLmlkCiAgICAgIH0sIGltYWdlLCB7CiAgICAgICAgb25JbWFnZUxvYWRlZDogJG9wdGlvbnMuc2V0QWxsSW1hZ2VzTG9hZGVkSWZUcnVlLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soJGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX2N0eC4kZW1pdCgnaXRlbUNsaWNrJywgaW1hZ2UpOwogICAgICAgIH0KICAgICAgfSksIG51bGwsIDE2LCBbIm9uSW1hZ2VMb2FkZWQiLCAib25DbGljayJdKTsKICAgIH0pLCAxMjgpKV0pOwogIH0pLCAxMjgpKV0sIDUxMiksIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIG51bGwsIDUxMiksIFtbX3ZTaG93LCAkZGF0YS5hbGxJbWFnZXNMb2FkZWRdXSldLCA2NCk7Cn0pOw=="},{"version":3,"sources":["/home/brandon/Documents/Independent Programming/tend/src/components/ImageGallery.vue"],"names":[],"mappings":";;;;;;;AAIM,EAAA,GAAG,EAAC,W;AAAY,EAAA,KAAK,EAAC;;;AAiBG,EAAA,KAAK,EAAC,gB;AAAiB,EAAA,GAAG,EAAC;;;;;;;;sDAjBzD,YAAA,CAeM,KAfN,EAAA,UAAA,EAeM,E,kBAdL,YAAA,CAaM,SAbN,EAaM,IAbN,EAaM,WAAA,CAXqB,KAAA,CAAA,YAWrB,EAXiC,UAA9B,MAA8B,EAAtB,KAAsB,EAAjB;yBAFtB,YAAA,CAaM,KAbN,EAaM;AAZL,MAAA,KAAK,EAAC,gBAYD;AAVJ,MAAA,GAAG,EAAE;AAUD,KAbN,E,CAKa,KAAK,IAAA,C,GAAjB,WAAA,CAA0B,IAAA,CAAA,MAA1B,EAA0B,SAA1B,EAA0B;AAAA,MAAA,GAAA,EAAA;AAAA,KAA1B,EAA0B,SAA1B,EAA0B,IAA1B,C,qDACA,YAAA,CAME,SANF,EAME,IANF,EAME,WAAA,CALe,MAKf,EALqB,UAAf,KAAe,EAAV;2BADb,YAAA,CAME,oBANF,EAAA,WAAA,CAME;AAJA,QAAA,GAAG,EAAE,KAAK,CAAC;AAIX,OANF,EAGS,KAHT,EAGc;AACZ,QAAA,aAAW,EAAE,QAAA,CAAA,wBADD;AAEZ,QAAA,OAAK,EAAA,iBAAA,MAAA;AAAA,iBAAE,IAAA,CAAA,KAAA,CAAK,WAAL,EAAmB,KAAnB,CAAF;AAAA;AAFO,OAHd,CAAA,E,IAAA,E,EAAA,E,4BAAA,C;KAME,CANF,E,GAAA,C,EAND,C;GAaM,CAbN,E,GAAA,CAcK,EAfN,E,GAAA,C,kBAiBA,YAAA,CAAwE,KAAxE,EAAA,UAAA,EAAwE,IAAxE,EAAwE,GAAxE,C,EAAwE,C,SAA3D,KAAA,CAAA,e,CAA2D,C","sourcesContent":["<!-- Presents images within the space given. Arranges the image into columns. Once the bottom of the page is reached, 'moreImages' will be emitted. A slot is\nprovided for a special card to be placed in the first place of the first column. -->\n\n<template>\n\t<div ref=\"container\" class=\"gallery-container\">\n\t\t<div\n\t\t\tclass=\"gallery-column\"\n\t\t\tv-for=\"(column, index) in imageColumns\"\n\t\t\t:key=\"index\"\n\t\t>\n\t\t\t<slot v-if=\"index == 0\" />\n\t\t\t<ImageCard\n\t\t\t\tv-for=\"image in column\"\n\t\t\t\t:key=\"image.id\"\n\t\t\t\tv-bind=\"image\"\n\t\t\t\t@imageLoaded=\"setAllImagesLoadedIfTrue\"\n\t\t\t\t@click=\"$emit('itemClick', image)\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n\t<!-- Only display once all images are loaded, to prevent hitting it initially -->\n\t<div v-show=\"allImagesLoaded\" class=\"reload-trigger\" ref=\"reload\"></div>\n</template>\n\n<script>\nimport ImageCard from \"./CardImage.vue\";\nimport { debounce } from \"../helpers/debounce.js\";\n\nexport default {\n\tname: \"ImageGallery\",\n\tcomponents: {\n\t\tImageCard,\n\t},\n\tprops: {\n\t\timages: Array,\n\t},\n\temits: [\"itemClick\", \"moreImages\"],\n\n\t/*\n        Lifecycle hooks are used to create global event listeners. When the component is unmounted, the listener will be removed to prevent memory leaks.\n\n        https://vuejs.org/v2/api/#Options-Lifecycle-Hooks\n        https://vuejs.org/v2/api/#created\n        https://vuejs.org/v2/api/#mounted\n        https://www.w3schools.com/js/js_htmldom_eventlistener.asp\n    */\n\tcreated() {\n\t\twindow.addEventListener(\"resize\", this.debounceUpdateSize);\n\t},\n\tmounted() {\n\t\t// Div with the reload ref is loaded at the bottom of the screen. Once this \"intersects\" the viewport (is displayed in the viewport) it will emit 'moreImages'. Ask for more images.\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n\t\tthis.observer = new IntersectionObserver((entries) => {\n\t\t\tif (entries[0].isIntersecting === true) {\n\t\t\t\tthis.$emit(\"moreImages\");\n\t\t\t}\n\t\t});\n\n\t\tthis.observer.observe(this.$refs.reload);\n\n\t\tthis.updateColumns();\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener(\"resize\", this.debounceUpdateSize);\n\t\tthis.observer.disconnect();\n\t},\n\tmethods: {\n\t\tsetAllImagesLoadedIfTrue() {\n\t\t\tthis.loadedImages++;\n\t\t\tif (this.loadedImages === this.images.length) {\n\t\t\t\tthis.allImagesLoaded = true;\n\t\t\t}\n\t\t},\n\t\tupdateColumns() {\n\t\t\tthis.loadedImages = 0;\n\n\t\t\tthis.initialiseColumns();\n\t\t\tthis.splitImagesIntoColumns();\n\t\t},\n\n\t\t// Find the width of the galleries current container. Find how many columns can fit inside and initialise the array.\n\t\tinitialiseColumns() {\n\t\t\tconst pageMargins = 30;\n\t\t\tconst cardWidth = 265;\n\t\t\tthis.numberOfColumns = Math.floor(\n\t\t\t\t(this.$refs.container.clientWidth - pageMargins) / cardWidth\n\t\t\t);\n\t\t\tconst columnQueue = [];\n\t\t\tfor (let i = 0; i < this.numberOfColumns; i++) {\n\t\t\t\tcolumnQueue[i] = [];\n\t\t\t}\n\n\t\t\tthis.imageColumns = columnQueue;\n\t\t},\n\n\t\t// Split images into a 2d array of columns first, then images.\n\t\tsplitImagesIntoColumns() {\n\t\t\tfor (let i = 0; i < this.images.length; i++) {\n\t\t\t\tthis.imageColumns[i % this.numberOfColumns].push(\n\t\t\t\t\tthis.images[i]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < this.numberOfColumns; i++) {\n\t\t\t\tthis.imageColumns[i].push();\n\t\t\t}\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tnumberOfColumns: 0,\n\t\t\timageColumns: [],\n\t\t\tobserver: null,\n\t\t\tloadedImages: 0,\n\t\t\tallImagesLoaded: false,\n\t\t\t// Use data to properly remove event listener;\n\t\t\tdebounceUpdateSize: debounce(this.updateColumns),\n\t\t};\n\t},\n\twatch: {\n\t\t// Regenerate columns whenever more images are loaded\n\t\timages: function() {\n\t\t\tthis.updateColumns();\n\t\t},\n\t},\n};\n</script>\n\n<style scoped>\n.gallery-container {\n\tmargin: auto;\n\tdisplay: flex;\n\twidth: 100%;\n\tjustify-content: center;\n}\n\n.gallery-column {\n\tmargin: 0.5rem;\n}\n\n.reload-trigger {\n\twidth: 100vw;\n\theight: 20px;\n}\n</style>\n"],"sourceRoot":""}]}
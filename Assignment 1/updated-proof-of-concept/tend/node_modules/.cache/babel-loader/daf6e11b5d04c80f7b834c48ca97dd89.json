{"remainingRequest":"/home/brandon/Documents/Independent Programming/tend/node_modules/babel-loader/lib/index.js!/home/brandon/Documents/Independent Programming/tend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/brandon/Documents/Independent Programming/tend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/brandon/Documents/Independent Programming/tend/src/components/ImageGallery.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/brandon/Documents/Independent Programming/tend/src/components/ImageGallery.vue","mtime":1629783242965},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/cache-loader/dist/cjs.js","mtime":1628388539905},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/babel-loader/lib/index.js","mtime":1628388539905},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/cache-loader/dist/cjs.js","mtime":1628388539905},{"path":"/home/brandon/Documents/Independent Programming/tend/node_modules/vue-loader-v16/dist/index.js","mtime":1628388539541}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEltYWdlQ2FyZCBmcm9tICIuL0ltYWdlQ2FyZC52dWUiOwppbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gIi4uL2hlbHBlcnMvZGVib3VuY2UuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkltYWdlR2FsbGVyeSIsCiAgY29tcG9uZW50czogewogICAgSW1hZ2VDYXJkOiBJbWFnZUNhcmQKICB9LAogIHByb3BzOiB7CiAgICBpbWFnZXM6IEFycmF5CiAgfSwKICBlbWl0czogWyJpdGVtQ2xpY2siLCAibW9yZUltYWdlcyJdLAoKICAvKgogICAgICAgICBMaWZlY3ljbGUgaG9va3MgYXJlIHVzZWQgdG8gY3JlYXRlIGdsb2JhbCBldmVudCBsaXN0ZW5lcnMuIFdoZW4gdGhlIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQsIHRoZSBsaXN0ZW5lciB3aWxsIGJlIHJlbW92ZWQgdG8gcHJldmVudCBtZW1vcnkgbGVha3MuCiAgICAgICAgICBodHRwczovL3Z1ZWpzLm9yZy92Mi9hcGkvI09wdGlvbnMtTGlmZWN5Y2xlLUhvb2tzCiAgICAgICAgIGh0dHBzOi8vdnVlanMub3JnL3YyL2FwaS8jY3JlYXRlZAogICAgICAgICBodHRwczovL3Z1ZWpzLm9yZy92Mi9hcGkvI21vdW50ZWQKICAgICAgICAgaHR0cHM6Ly93d3cudzNzY2hvb2xzLmNvbS9qcy9qc19odG1sZG9tX2V2ZW50bGlzdGVuZXIuYXNwCiAgICAgKi8KICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMuZGVib3VuY2VVcGRhdGVTaXplKTsKICAgIHRoaXMudXBkYXRlQ29sdW1ucygpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gV2hlbiB0aGUgYm90dG9tIG9mIHRoZSBzY3JlZW4gaXMgcmVhY2hlZC4gQXNrIGZvciBtb3JlIGltYWdlcy4KICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbnRlcnNlY3Rpb25fT2JzZXJ2ZXJfQVBJCiAgICB0aGlzLm9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzKSB7CiAgICAgIGlmIChlbnRyaWVzWzBdLmlzSW50ZXJzZWN0aW5nID09PSB0cnVlKSB7CiAgICAgICAgX3RoaXMuJGVtaXQoIm1vcmVJbWFnZXMiKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy4kcmVmcy5yZWxvYWQpOwogIH0sCiAgdW5tb3VudGVkOiBmdW5jdGlvbiB1bm1vdW50ZWQoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5kZWJvdW5jZVVwZGF0ZVNpemUpOwogICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRBbGxJbWFnZXNMb2FkZWRJZlRydWU6IGZ1bmN0aW9uIHNldEFsbEltYWdlc0xvYWRlZElmVHJ1ZSgpIHsKICAgICAgdGhpcy5sb2FkZWRJbWFnZXMrKzsKCiAgICAgIGlmICh0aGlzLmxvYWRlZEltYWdlcyA9PT0gdGhpcy5pbWFnZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5hbGxJbWFnZXNMb2FkZWQgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlQ29sdW1uczogZnVuY3Rpb24gdXBkYXRlQ29sdW1ucygpIHsKICAgICAgdGhpcy5sb2FkZWRJbWFnZXMgPSAwOwogICAgICB0aGlzLmluaXRpYWxpc2VDb2x1bW5zKCk7CiAgICAgIHRoaXMuc3BsaXRJbWFnZXNJbnRvQ29sdW1ucygpOwogICAgfSwKICAgIGluaXRpYWxpc2VDb2x1bW5zOiBmdW5jdGlvbiBpbml0aWFsaXNlQ29sdW1ucygpIHsKICAgICAgdmFyIGJvZHlfbWFyZ2lucyA9IDMwOwogICAgICB2YXIgY2FyZF93aWR0aCA9IDI2NTsKICAgICAgdGhpcy5jb2x1bW5zID0gTWF0aC5mbG9vcigod2luZG93LmlubmVyV2lkdGggLSBib2R5X21hcmdpbnMpIC8gY2FyZF93aWR0aCk7CiAgICAgIHZhciBjb2x1bW5RdWV1ZSA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnM7IGkrKykgewogICAgICAgIGNvbHVtblF1ZXVlW2ldID0gW107CiAgICAgIH0KCiAgICAgIHRoaXMuaW1hZ2VDb2x1bW5zID0gY29sdW1uUXVldWU7CiAgICB9LAogICAgLy8gU3BsaXQgaW1hZ2VzIGludG8gYSAyZCBhcnJheSBvZiBjb2x1bW5zIGZpcnN0LCB0aGVuIGltYWdlcy4KICAgIHNwbGl0SW1hZ2VzSW50b0NvbHVtbnM6IGZ1bmN0aW9uIHNwbGl0SW1hZ2VzSW50b0NvbHVtbnMoKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbWFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmltYWdlQ29sdW1uc1tpICUgdGhpcy5jb2x1bW5zXS5wdXNoKHRoaXMuaW1hZ2VzW2ldKTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMuY29sdW1uczsgX2krKykgewogICAgICAgIHRoaXMuaW1hZ2VDb2x1bW5zW19pXS5wdXNoKCk7CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2x1bW5zOiAwLAogICAgICBpbWFnZUNvbHVtbnM6IFtdLAogICAgICBvYnNlcnZlcjogbnVsbCwKICAgICAgbG9hZGVkSW1hZ2VzOiAwLAogICAgICBhbGxJbWFnZXNMb2FkZWQ6IGZhbHNlLAogICAgICAvLyBVc2UgZGF0YSB0byBwcm9wZXJseSByZW1vdmUgZXZlbnQgbGlzdGVuZXI7CiAgICAgIGRlYm91bmNlVXBkYXRlU2l6ZTogZGVib3VuY2UodGhpcy51cGRhdGVDb2x1bW5zKQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBpbWFnZXM6IGZ1bmN0aW9uIGltYWdlcygpIHsKICAgICAgdGhpcy51cGRhdGVDb2x1bW5zKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/brandon/Documents/Independent Programming/tend/src/components/ImageGallery.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"gallery-container\">\n\t\t<div\n\t\t\tclass=\"gallery-column\"\n\t\t\tv-for=\"(column, index) in imageColumns\"\n\t\t\t:key=\"index\"\n\t\t>\n\t\t\t<ImageCard\n\t\t\t\tv-for=\"image in column\"\n\t\t\t\t:key=\"image.id\"\n\t\t\t\tv-bind=\"image\"\n\t\t\t\t@imageLoaded=\"setAllImagesLoadedIfTrue\"\n\t\t\t\t@click=\"$emit('itemClick', image)\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n\t<!-- Only display once all images are loaded, to prevent hitting it initially -->\n\t<div v-show=\"allImagesLoaded\" class=\"reload-trigger\" ref=\"reload\"></div>\n</template>\n\n<script>\nimport ImageCard from \"./ImageCard.vue\";\nimport { debounce } from \"../helpers/debounce.js\";\n\nexport default {\n\tname: \"ImageGallery\",\n\tcomponents: {\n\t\tImageCard,\n\t},\n\tprops: {\n\t\timages: Array,\n\t},\n\temits: [\"itemClick\", \"moreImages\"],\n\n\t/*\n        Lifecycle hooks are used to create global event listeners. When the component is unmounted, the listener will be removed to prevent memory leaks.\n\n        https://vuejs.org/v2/api/#Options-Lifecycle-Hooks\n        https://vuejs.org/v2/api/#created\n        https://vuejs.org/v2/api/#mounted\n        https://www.w3schools.com/js/js_htmldom_eventlistener.asp\n    */\n\tcreated() {\n\t\twindow.addEventListener(\"resize\", this.debounceUpdateSize);\n\t\tthis.updateColumns();\n\t},\n\tmounted() {\n\t\t// When the bottom of the screen is reached. Ask for more images.\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n\t\tthis.observer = new IntersectionObserver((entries) => {\n\t\t\tif (entries[0].isIntersecting === true) {\n\t\t\t\tthis.$emit(\"moreImages\");\n\t\t\t}\n\t\t});\n\n\t\tthis.observer.observe(this.$refs.reload);\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener(\"resize\", this.debounceUpdateSize);\n\t\tthis.observer.disconnect();\n\t},\n\tmethods: {\n\t\tsetAllImagesLoadedIfTrue() {\n\t\t\tthis.loadedImages++;\n\t\t\tif (this.loadedImages === this.images.length) {\n\t\t\t\tthis.allImagesLoaded = true;\n\t\t\t}\n\t\t},\n\t\tupdateColumns() {\n\t\t\tthis.loadedImages = 0;\n\n\t\t\tthis.initialiseColumns();\n\t\t\tthis.splitImagesIntoColumns();\n\t\t},\n\n\t\tinitialiseColumns() {\n\t\t\tconst body_margins = 30;\n\t\t\tconst card_width = 265;\n\t\t\tthis.columns = Math.floor(\n\t\t\t\t(window.innerWidth - body_margins) / card_width\n\t\t\t);\n\t\t\tconst columnQueue = [];\n\t\t\tfor (let i = 0; i < this.columns; i++) {\n\t\t\t\tcolumnQueue[i] = [];\n\t\t\t}\n\n\t\t\tthis.imageColumns = columnQueue;\n\t\t},\n\n\t\t// Split images into a 2d array of columns first, then images.\n\t\tsplitImagesIntoColumns() {\n\t\t\tfor (let i = 0; i < this.images.length; i++) {\n\t\t\t\tthis.imageColumns[i % this.columns].push(this.images[i]);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < this.columns; i++) {\n\t\t\t\tthis.imageColumns[i].push();\n\t\t\t}\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcolumns: 0,\n\t\t\timageColumns: [],\n\t\t\tobserver: null,\n\t\t\tloadedImages: 0,\n\t\t\tallImagesLoaded: false,\n\t\t\t// Use data to properly remove event listener;\n\t\t\tdebounceUpdateSize: debounce(this.updateColumns),\n\t\t};\n\t},\n\twatch: {\n\t\timages: function() {\n\t\t\tthis.updateColumns();\n\t\t},\n\t},\n};\n</script>\n\n<style scoped>\n.gallery-container {\n\tmargin: auto;\n\tdisplay: flex;\n}\n\n.gallery-column {\n\tmargin: 0.5rem;\n}\n\n.reload-trigger {\n\twidth: 100vw;\n\theight: 20px;\n}\n</style>\n"],"sourceRoot":""}]}